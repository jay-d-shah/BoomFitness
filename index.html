<!DOCTYPE html> 
<html> 
<head> 
<title>My Page</title> 
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<link rel="stylesheet" href="jw-jqm-cal.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script type="text/javascript" src="jw-jqm-cal.js"></script>


   <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/3.5.2/select2.css" rel="stylesheet" />
   <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/select2/3.5.2/select2.js"></script>

   <script type="text/javascript">

      function initCalendar()
      {

         $("#calendar").jqmCalendar({
            events : eventsArray,
            months : ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            days : ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
            startOfWeek : 0
         });

      }




      var eventsArray = [ { "summary" : "Greg Rocks", "begin" : new Date("2013-02-05 00:00:00"), "end" : new Date("2013-02-07 00:00:00") }, { "summary" : "Test event", "begin" : new Date(), "end" : new Date() }, { "summary" : "Test event", "begin" : new Date(), "end" : new Date() } ];

      function setValue()
      {
         //alert('adsfdfsafdas');

         var select2Value = $(".js-example-data-array").select2('data').text;

         var textareaValue = $("#formTextArea").val();

         $("#formTextArea").val("");

         var tempNewDate = { "summary" : textareaValue, "begin" : currentDate, "end" : currentDate };

         eventsArray.push(tempNewDate);

         $("#calendar").jqmCalendar({
            events : eventsArray,
            months : ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            days : ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
            startOfWeek : 0
         });


         $("#calendar").trigger('refresh');
      }



      //$("#view-calendar").live('pageinit', function(event, ui) {})

</script>

</head> 
<body> 

<div data-role="page" id="view-calendar" data-theme="c">

<div data-role="header">
   <a href="#popupLogin" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="c" aria-haspopup="true" aria-owns="#popupLogin" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">Add</span></span></a>



   <h1>Boom Fitness</h1>
</div>


   <a style="display: none" href="#" onclick="initCalendar();">Click Me</a>

   <a style="display: none" href="#" onclick="getValue();"> Get Value</a>

   <div data-role="popup" id="popupLogin"  class="ui-corner-all">
      <form>
         <div style="padding:10px 20px;">
            <h3>What did you do?</h3>

            <input style="display: none;" class="js-example-data-array" type="text" aria-multiline="true" id="select2entry" value=""  />


            <textarea id="formTextArea" rows="2"></textarea>

            <br/>
            <br/>

            <button type="button" onclick="jQuery('#popupLogin').popup('close');setValue();" data-theme="b">Add</button>
            <button type="button" onclick="jQuery('#popupLogin').popup('close');" data-theme="b">Cancel</button>
         </div>
      </form>
   </div>




   <div data-role="content">
<div id="calendar"></div>
</div>
   

</div>




<script type="text/javascript">
   var data = [{ id: 0, text: 'Weight Lift' }, { id: 1, text: 'Ran a mile' }, { id: 2, text: 'Situps' }, { id: 3, text: 'Pushups' }, { id: 4, text: 'Squats' }];

   var currentDate = new Date();

   $( document ).ready(function() {

      initCalendar();

      $(".js-example-data-array").select2({
         tags: data,
         width: "100%"
      });


      $("#calendar").bind('change', function(event, date) {
         //console.log(date);
         date.getHours()
         currentDate =  date;
      });
   });



</script>

</body>
</html>